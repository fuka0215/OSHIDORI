<h1 id="room" data-room="<%= @room.id %>" data-user="<%= current_user.id %>"><%= @user.name %>さんとのDM</h1>

<div class="message container">
  <% @chats.each do |chat| %>
    <div class="row">
    <% if chat.user_id == current_user.id %>
    <div class="col-10 justify-content-start">
      <%= render "public/chats/chat", chat: chat %>
    </div>
    <% else %>
      <div class="col-10 justify-content-end">
        <%= image_tag @user.get_profile_image(50, 50), class: "rounded-circle";%>
        <p class="text-left bg-secondary-subtle p-5"><%= chat.message %></p>
      </div>
    <% end %>
    </div>
  <% end %>
</div>

<div class="errors">
  <%= render "layouts/errors_messages", model: @chat %>
</div>

<%= form_with model: @chat, data: {remote: true} do |f| %>
  <%= f.text_field :message %>
  <%= f.hidden_field :room_id %>
  <div class="text-right my-1">
    <%= f.submit "送信", class: "btn btn-sm btn-info" %>
  </div>
<% end %>